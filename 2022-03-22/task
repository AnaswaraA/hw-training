from lxml import html
import requests

def CarbonCrawler(url):
# html= requests.get("https://carbon38.com/products/crop-tank-2-0?variant=40293599805629")
#     html = requests.get("https://www.carbon38.com/shop-all-activewear/tops")
    ht = requests.get(url)
    doc = html.fromstring(ht.content)
    m= doc.xpath('//a[@class="isp_product_image_href"]/@href')

    for links in m:
        link = requests.get('https://www.carbon38.com/' + links)
        link_datas = html.fromstring(link.content)

        brand_name = link_datas.xpath("//h1/text()")
        prize = link_datas.xpath('//div[@class="ProductMeta__PriceList Heading"]/span/text()')
        brand= link_datas.xpath('//h2[@class="ProductMeta__Vendor Heading u-h1"]/a/text()')
        reviews = link_datas.xpath('//div[@class="okeReviews-reviewsSummary-ratingCount"]/text()')
        image_url = link_datas.xpath('//div[@class="AspectRatio AspectRatio--withFallback"]/img[@class="Image--fadeIn lazyautosizes Image--lazyLoaded"]/text()')
        color = link_datas.xpath('//ul[@class="ColorSwatchList HorizontalList HorizontalList--spacingTight"]/li[@class="HorizontalList__Item"]/label/span/text()')
         size = link_datas.xpath('//div[@class="ProductForm__Option ProductForm__Option--labelled"]/fieldset[@class="ProductForm__Fieldset"]/ul[@class="SizeSwatchList HorizontalList HorizontalList--spacingTight"]/li/label/text()')
        description = link_datas.xpath('//div/div[@class="Faq__AnswerWrapper"]/div[@class="Faq__Answer Rte"]/text()')
        print(brand,brand_name,prize,reviews,image_url,color,size,description)
carbon=CarbonCrawler("https://www.carbon38.com/shop-all-activewear/tops")
print(carbon)

